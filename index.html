<!DOCTYPE html>
<!-- Main project-->




<!-- 
<meta name="color-scheme" content="dark"> 
-->

<meta name="color-scheme" content="dark">

<!-- Start writing JavaScript code -->
<script>

// ====== DATA ======
var glossary = [];  // array of word objects [] brackets are empty and inside there the array will go.
var playing = true; // Use of boolean to be able to quit the program. (actually I added this for the cause that it was part of the course, and I dont understand how I could use it in a better way) Update: I grasp the boolean now!
//-----------------------------------------------------------------------------------------------------------------

// ====== Local storage ====== When program starts, check if there's saved data in localStorage .getitem
if (localStorage.getItem("glossary") !== null) { // If "!== null" FALSE (nothing stored) -> skip this code, program continues with empty glossary
  glossary = JSON.parse(localStorage.getItem("glossary")); // If "!==" TRUE (data exists) -> load saved words into glossary
}
//-----------------------------------------------------------------------------------------------------------------


// ====== MAIN MENU LOOP ======
while (playing) { // Calling to the boolean variable set atop of the program under data. When changed to false the program will stop. Line 38 atm
  var choice = prompt( // prompt box that will be the main menu of the program. \n is for a new line in the prompt box.
    "Glossary Trainer\n" + // 
    "1 = Add word\n" +
    "2 = List words\n" +
    "3 = Start quiz\n" +
    "4 = Storage menu\n" + // Became a whole submenu 
    "5 = Quit" // the user can choose what to do in the program by entering 1, 2, 3 or 4. At this stage, it is easy to add more options if needed.
  );

  if (choice === "1") { 
    addWord(); // Calling to the function found under functions
  } else if (choice === "2") {
    listWords(); // Calling to the function listWords, 
  } else if (choice === "3") {
    startQuiz(); // Calling to the function startquiz, this does work. YEY!!
  } else if (choice === "4") {
    storage(); // my plan is add and delete list word here. But it is not working yes 
  } else if (choice === "5") {
    playing = false; // changes the boolean variable to false and stops the program.
    alert("Goodbye!"); // alert box that says goodbye when the user quits the program.
  } else {
    alert("Invalid choice."); // if the user enters something else than 1, 2, 3 or 4 this alert will pop up. and the program will go back to the main menu and the enterings made by the user is still there
  }
}
document.write("Refresh the page to launch GlossyHelper");
//-----------------------------------------------------------------------------------------------------------------


// ====== FUNCTIONS ======

//   ==== Add words ====

function addWord() {  // function is a block of code that performs a specific task // Can we reuse functions? in this case addWord. // it will be number 1 in the "prompt menu"
  var swe = prompt("Enter a Swedish word:"); // add a word in Swedish first
  var eng = prompt("Enter English translation:"); // then add its English translation
  // Lets see if we can add the words to the .json
  glossary.push({ swedish: swe.toLowerCase(), english: eng.toLowerCase() }); // When the user adds a word it goes to swedish or english push adds a new element to the end of an array. But collin dont want to call it element.. dont remember what he said.
  alert("Word added: " + swe + " -> " + eng); // Can I make symbols? instead of ->  use an arrow? or something else that suits better?
  localStorage.setItem("glossary", JSON.stringify(glossary));
}
//-----------------------------------------------------------------------------------------------------------------


//   ==== The Words List ====

function listWords() { // this will list all words that have been added to the glossary on the page in html via document write. for now . // it will be number 2 in the "prompt menu"
// lets try to make the wordslist in a prompt. If I direct towards glossary it creates just a prompt with object object. Need to "format the var glossary"

  if (glossary.length === 0) { // if there are no words in the glossary = "=== 0" 
   alert("No words added yet."); // This will be written in a prompt
   return; // Stop the function and start over instead of using else
  } 
    var listText = "Glossary:\n\n"; // Creating a new var "listText" where the list will be formatted. do I need to put this at the top of the program?
      for (var i = 0; i < glossary.length; i++) { // The index "i" starts at 0 (Lesson 07 - Loops).
// i++ makes it increase by 1 each time, so the loop continues until all words are listed.
    listText += (i + 1) + ". " + glossary[i].swedish + " → " + glossary[i].english + "\n"; // Now we make a list by adding one word at a time. The "(i +1)" make it start the count from 1 instead of 0
// "+=" means we keep what we already have and add more on the next line using "\n".
// On the left side is the Swedish word and on the right side the English word. We will see this in the prompt box.
 
  }
   // Show the list inside a PROMPT
  prompt(listText + "\n(Press OK to return to menu)"); // List \n creates a new line Ok to return is the message.
}
//-----------------------------------------------------------------------------------------------------------------


//   ==== The Quiz ====

function startQuiz() { // this will start a quiz where the user can test their knowledge of the words in the glossary. // it will be number 3 in the "prompt menu"
  if (glossary.length === 0) { // if there are no words in the glossary = "=== 0" 
    alert("No words in glossary!"); // This alert will pop up.
    return; // return stops the function and goes back to the main "prompt menu"
  }

  // choose how to play the quiz 
  var direction = prompt("Choose quiz direction:\n1 = Swedish → English\n2 = English → Swedish"); // \n is for a new line in the prompt box. 
  if (direction !== "1" && direction !== "2") { // Check if the user entered something OTHER than "1" or "2" (invalid choice)
    alert("Invalid choice."); // Give the user an alert
    return; // Give the user a new chance
  }

  // pick a random word
  var index = Math.floor(Math.random() * glossary.length); // Math.random() gives a random number between 0 and 1. Math.floor() rounds down to the nearest whole number to make it work with, glossary.length, that gives the number of words in the glossary.
  var word = glossary[index]; // glossary[index] picks the random word object from the array.

  if (direction === "1") { // If direction is "1", the quiz asks to translate from Swedish to English. If "2", the quiz asks to translate from English to Swedish.
    var answer = prompt("Translate into English: " + word.swedish); //prompt box asking for the translation of the Swedish word.
    checkAnswer(answer, word.english); // checkAnswer function checks if the answer is correct.
  } else {
    var answer = prompt("Translate into Swedish: " + word.english[0]); // If "2" is chosen by user, the quiz asks to translate from English to Swedish.
    checkAnswer(answer, [word.swedish]); // checkAnswer function checks if the answer is correct. Same as above but checks the Swedish word list.
  }
}

function checkAnswer(answer, correctAnswers) { // This function checks if the user's answer is correct.
  if (!answer) {
    alert("No answer given."); // If the user presses cancel or leaves the prompt empty, this alert will pop up. 
    return; // User will be returned to the "main menu".
  }

  var lower = answer.toLowerCase();// toLowerCase() method converts a string to lowercase letters. 
  var correct = false; // Assume the answer is incorrect first

  for (var i = 0; i < correctAnswers.length; i++) { 
    if (lower === correctAnswers[i].toLowerCase()) {
      correct = true; // if the assumption above was wrong it changes to true.
    }
  }

  if (correct) { // if it matches
    alert(" Correct!"); // The program will alert "Correct!" The User can press 
  } else {
    alert(" Wrong. Correct answer(s): " + correctAnswers.join(", ")); // The program will display the correct answer(s). But that is not working... Now it shows Glossary[object Object] on the screen (document write) and or the program is broken.,
  }
}
//-----------------------------------------------------------------------------------------------------------------

//   ==== Add and delete storage ====
function storage() {
  var choice = prompt( // prompt box that will be the main menu of the program. \n is for a new line in the prompt box.
    "Storage menu\n" + // 
    "1 = Import list\n" +
    "2 = Delete list \n" +
    "3 = Export list\n" +
    "4 = List words\n" + // 
    "5 = Back to main menu" // the user can choose what to do in the program by entering 1, 2, 3 or 4. At this stage, it is easy to add more options if needed.
  );

  if (choice === "1") { 
    importList(); // pointing to the function found under functions
  } else if (choice === "2") {
    deleteList(); // The function with ability to clear the local storage
  } else if (choice === "3") {
    exportList(); // Don't know how to do this yet.
  } else if (choice === "4") {
    listWords(); // my plan is add and delete list word here. But it is not working. Actually breaks the program because it is inside a function. Scope?
  } else if (choice === "5") {
    return;
  } else {
    alert("Invalid choice."); // if the user enters something else than 1, 2, 3 or 4 this alert will pop up. and the program will go back to the main menu and the enterings made by the user is still there
  }
}
//-----------------------------------------------------------------------------------------------------------------


 // ==== Functions Storage Menu ====
 
 // ==== Delete ====
function deleteList() {
  var confirm = prompt("Delete saved words? (yes/no)"); // Creates a variable and a prompt to the user
  if (confirm.toLowerCase() === "yes") { // when user type yes 
    localStorage.removeItem("glossary"); // .removeItem is called that will remove the local storage
    alert("Saved words deleted!"); 
    alert("You need to reload the page!");
    return; // Is this a pure function?
  
  }
}
//-----------------------------------------------------------------------------------------------------------------

 // ==== Import ====
function importList() {  // Copied the addWord and wordsList function and will add split to make so the user can paste a block of words 
  var data = prompt("Paste the words in order Swedish then English:\nOne space in between every word "); // paste text for example "trä wood vatten water"
  
  if (data) { // Check if user actually pasted something, otherwise the function will not run. Will it return to the menu, do I need to give invalid message or create a return?
    var words = data.split(" "); // Split the text by spaces into an array of individual words ["trä", "wood", "vatten", "water"] (What about case sensitivity?) data.split(" ") - data is the variable, split is the function/method, and " " (the space) is the separator/parameter.
 
    // Loop through the array, taking 2 words at a time
    for (var i = 0; i < words.length; i += 2) { // i is the position/index, i += 2 skips by 2, words.length is total number of words. We start counting from zero, so position 0 is the 1st element, position 2 is the 3rd element
    // a for is a 
      var swe = words[i].toLowerCase();      // First word in the pair = Swedish 0 2 4 6 8 
      var eng = words[i + 1].toLowerCase();  // Second word in the pair = English 1 3 5 7 9 
      glossary.push({ swedish: swe, english: eng }); // Push it to glossary same way as in addWord
    }
    
    localStorage.setItem("glossary", JSON.stringify(glossary)); // Same as the addWord
    alert("Words imported!"); // Will it return to the main menu? // If the user pastes three words it will probably break...
  } // You don't understand how a car works just because you can drive a car.
}
//-----------------------------------------------------------------------------------------------------------------

 // ==== Export ==== 
function exportList() {
  if (glossary.length === 0) { // If empry 
    alert("No words to export") // Alert the user with this meesage
    return; // Then return 
}    

var exportText = ""; // same as list text but diffent name for debugging and no message to the user

for (var i = 0; i < glossary.length; i++) {  //Part 1: var i = 0 (Initialization) Start counting at position 0, Part 2: i < glossary.length (Condition) Keep looping WHILE i is less than the total number of words, i < glossary.length (Condition) "Keep looping WHILE i is less than the total number of words"

  exportText += + glossary[i].swedish + "  " + glossary[i].english + ; // we can skipp the "index 0 -> 1 fix"
}


//function listWords() { // this will list all words that have been added to the glossary on the page in html via document write. for now . // it will be number 2 in the "prompt menu"
// lets try to make the wordslist in a prompt. If I direct towards glossary it creates just a prompt with object object. Need to "format the var glossary"

  //if (glossary.length === 0) { // if there are no words in the glossary = "=== 0" 
   //alert("No words added yet."); // This will be written in a prompt
   //return; // Stop the function and start over instead of using else
  //} 
    //var listText = "Glossary:\n\n"; // Creating a new var "listText" where the list will be formatted. do I need to put this at the top of the program?
      //for (var i = 0; i < glossary.length; i++) { // The index "i" starts at 0 (Lesson 07 - Loops).
// i++ makes it increase by 1 each time, so the loop continues until all words are listed.
    //listText += (i + 1) + ". " + glossary[i].swedish + " → " + glossary[i].english + "\n"; // Now we make a list by adding one word at a time. The "(i +1)" make it start the count from 1 instead of 0
// "+=" means we keep what we already have and add more on the next line using "\n".
// On the left side is the Swedish word and on the right side the English word. We will see this in the prompt box.
 
//  }
  // // Show the list inside a PROMPT
  //prompt(listText + "\n(Press OK to return to menu)"); // List \n creates a new line Ok to return is the message.


// 
//-----------------------------------------------------------------------------------------------------------------



</script>

<!--
==============================
Notes will be put in readme
==============================

  // I dont know how to handle synonyms yet. If I add, will I need to redo everything?
  // but when I am inside the brackets I thought it could not get out to the rest of the program 
  // The function starts after the bracket - so "while (playing)" is outside the function?
  // The semicolon ; marks the end of a statement in JavaScript. The colon : means "continues" or "this belongs to that"
  // Will this be possible to run on github pages or does it need to be inside a same folder on the computer?
  // But what if I want to open up the program with the list from last session 
==============================
Updates will be published on github
==============================

-->